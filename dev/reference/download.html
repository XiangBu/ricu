<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Data download utilities — download_src • ICU data with R</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Data download utilities — download_src" />
<meta property="og:description" content="Making a dataset available to ricu consists of 3 steps: downloading
(download_src()), importing (import_src()) and attaching
(attach_src()). While downloading and importing are one-time procedures,
attaching of the dataset is repeated every time the package is loaded.
Briefly, downloading loads the raw dataset from the internet (most likely
in .csv format), importing consists of some preprocessing to make the
data available more efficiently (by converting it to .fst
format) and attaching sets up the data for use by the package." />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ICU data with R</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/jss.pdf">\pkg{ricu}: \proglang{R}'s interface for ICU data (PDF)</a>
    </li>
    <li>
      <a href="../articles/uom.html">Units of measurement</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/septic-tank/ricu">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Data download utilities</h1>
    
    <div class="hidden name"><code>download.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Making a dataset available to <code>ricu</code> consists of 3 steps: downloading
(<code>download_src()</code>), importing (<code><a href='import_src.html'>import_src()</a></code>) and attaching
(<code><a href='attach_src.html'>attach_src()</a></code>). While downloading and importing are one-time procedures,
attaching of the dataset is repeated every time the package is loaded.
Briefly, downloading loads the raw dataset from the internet (most likely
in <code>.csv</code> format), importing consists of some preprocessing to make the
data available more efficiently (by converting it to <code><a href='http://www.fstpackage.org/reference/fst.html'>.fst</a></code>
format) and attaching sets up the data for use by the package.</p>
    </div>

    <pre class="usage"><span class='fu'>download_src</span>(<span class='kw'>x</span>, <span class='kw'>...</span>)

<span class='co'># S3 method for src_cfg</span>
<span class='fu'>download_src</span>(
  <span class='kw'>x</span>,
  data_dir = <span class='fu'><a href='data_dir.html'>src_data_dir</a></span>(<span class='kw'>x</span>),
  tables = <span class='kw'>NULL</span>,
  force = <span class='fl'>FALSE</span>,
  user = <span class='kw'>NULL</span>,
  pass = <span class='kw'>NULL</span>,
  <span class='kw'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Object specifying the source configuration</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Generic consistency</p></td>
    </tr>
    <tr>
      <th>data_dir</th>
      <td><p>Destination directory where the downloaded data is written to.</p></td>
    </tr>
    <tr>
      <th>tables</th>
      <td><p>Character vector specifying the tables to download. If
<code>NULL</code>, all available tables are downloaded.</p></td>
    </tr>
    <tr>
      <th>force</th>
      <td><p>Logical flag; if <code>TRUE</code>, existing data will be re-downloaded</p></td>
    </tr>
    <tr>
      <th>user, pass</th>
      <td><p>Physionet credentials; if <code>NULL</code> and environment
variables <code>RICU_PHYSIONET_USER</code>/<code>RICU_PHYSIONET_PASS</code> are not set, user
input is required</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Downloads by <code>ricu</code> are focused data hosted by
<a href='https://physionet.org'>PhysioNet</a> and tools are currently available for
downloading the datasets
<a href='https://physionet.org/content/mimiciii/1.4/'>MIMIC-III</a>,
<a href='https://physionet.org/content/eicu-crd/2.0/'>eICU</a> and
<a href='https://physionet.org/content/hirid/1.0/'>HiRID</a> (see <a href='data.html'>data</a>). While
credentials are required for downloading any of the three datasets, demo
dataset for both MIMIC-III and eICU are available without having to log in.
Even though access to full dataset is credentialed, the datasets are in
fact publicly available. For setting up an account, please refer to <a href='https://physionet.org/register/'>the registration form</a>.</p>
<p>Physionet credentials can either be entered in an interactive session,
passed as function arguments <code>user</code>/<code>pass</code> or as environment
variables <code>RICU_PHYSIONET_USER</code>/<code>RICU_PHYSIONET_PASS</code>. For setting
environment variables on session startup, refer to <code><a href='https://rdrr.io/r/base/Startup.html'>base::.First.sys()</a></code> and
for setting environment varaibles in general, refer to <code><a href='https://rdrr.io/r/base/Sys.setenv.html'>base::Sys.setenv()</a></code>
If the openssl package is available, SHA256 hashes of downloaded files are
verified using <code><a href='https://rdrr.io/pkg/openssl/man/hash.html'>openssl::sha256()</a></code>.</p>
<p>Demo datasets
<a href='https://physionet.org/content/mimiciii-demo/1.4/'>MIMIC-III demo</a> and
<a href='https://physionet.org/content/eicu-crd-demo/2.0/'>eiCU demo</a> can either be
installed as R packages directly by running</p><pre><span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span>(
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"mimic.demo"</span>, <span class='st'>"eicu.demo"</span>),
  repos = <span class='st'>"https://septic-tank.github.io/physionet-demo"</span>
)
</pre>

<p>or downloaded and imported using <code>download_src()</code> and <code><a href='import_src.html'>import_src()</a></code>.
Furthermore, <code>ricu</code> specifies <code>mimic.demo</code> and <code>eicu.demo</code> as <code>Suggests</code>
dependencies therefore, passing <code>dependencies = TURE</code> when calling
<code><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages()</a></code> for installing <code>ricu</code>, this will automatically install
the demo datasets as well.</p>
<p>While the included data downloaders are intended for data hosted by
PhysioNet, <code>download_src()</code> is an S3 generic function that can be extended
to new classes. Method dispatch is intended to occur on objects that
inherit from or can be coerced to <code>src_cfg</code>. For more information on data
source configuration, refer to <code><a href='load_src_cfg.html'>load_src_cfg()</a></code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>if</span> (<span class='fl'>FALSE</span>) {

<span class='kw'>dir</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span>()
<span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span>(<span class='kw'>dir</span>)

<span class='fu'>download_datasource</span>(<span class='st'>"mimic_demo"</span>, data_dir = <span class='kw'>dir</span>)
<span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span>(<span class='kw'>dir</span>)

<span class='fu'><a href='https://rdrr.io/r/base/unlink.html'>unlink</a></span>(<span class='kw'>dir</span>, recursive = <span class='fl'>TRUE</span>)

}

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nicolas Bennett, Drago Plecko, Ida-Fong Ukor.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


